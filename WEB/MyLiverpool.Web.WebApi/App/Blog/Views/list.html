<div class="container-fluid" ng-init="vm.initList()">
    <div ng-if="vm.page > 0">
        <form class="form-inline">
            <div class="form-group">
                <select class="form-control"
                        ng-model="vm.categoryId"
                        ng-options="category.id as category.name for category in vm.categories" ng-change="vm.changeCategoryId()"></select>
            </div>
            <div class="form-group">
                <input class="form-control" ng-model="vm.userName" ng-model-options="{debounce: 1000}" ng-change="vm.filterByUserName()" placeholder="Логин" /> <!--todo magic number-->
            </div>
        </form>
    </div>
    <div class="row" ng-repeat="item in vm.items">
        <div class="" ng-if="!item.pending || isEditor()">
            <div class="flex-vertical-center">
                <a ui-sref="blogInfo({id: item.id})" class="col-xs-9 col-sm-9"><h4 ng-bind="item.title"></h4></a>
                <span class="col-xs-3 col-sm-3 pull-right" ng-if="isAuthor()">
                    <a ng-if="isEditor()" ng-show="item.pending" ng-click="vm.activate($index)"><span class="glyphicon glyphicon-ok"></span></a>
                    <a ng-if="isEditor() || isUserAuthor(userId(), item.authorId)" ui-sref="blogEdit({id: item.id})"><span class="glyphicon glyphicon-pencil"></span></a>
                    <a ng-if="isEditor() || isUserAuthor(userId(), item.authorId)" ng-click="vm.delete($index)"><span class="glyphicon glyphicon-trash"></span></a>
                </span>
            </div>
            <div class="">
                <img class="img-thumbnail news-mini center-block" alt="" ng-src="{{item.photoPath}}" />
            </div>
            <div class="">
                <i> <span ng-bind-html="item.brief | rawHtml"></span></i>
            </div>
            <div class="col-sx-12 col-sm-12">
                <ul class="list-inline small small-offset">
                    <li class="">Категория:</li>
                    <li class=""><a ui-sref="blog({page: 1, categoryId: item.categoryId})" ng-bind="item.categoryName"></a></li>
                    <li class="">|</li>
                    <li class="">Время добавления:</li>
                    <li class="" ng-bind="item.additionTime | date:'medium'"></li>
                    <li class="">|</li>
                    <li class="">Просмотры</li>
                    <li class="" ng-bind="item.reads"></li>
                    <li class="">|</li>
                    <li class="">Автор:</li>
                    <li class=""><a ui-sref="userInfo({id: item.authorId })" ng-bind="item.authorUserName"></a></li>
                    <li class="">|</li>
                    <li class="">Комментарии:</li>
                    <li class="" ng-bind="item.commentsCount"></li>
                </ul>
            </div>
        </div>
    </div>
    <div class="pagination">
        <uib-pagination ng-show="vm.totalItems > vm.itemPerPage" total-items="vm.totalItems" ng-model="vm.page" ng-change="vm.goToPage()"></uib-pagination>
    </div>
</div>