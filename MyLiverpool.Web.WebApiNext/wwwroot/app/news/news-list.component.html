<div class="container-fluid">
    <div> <!--ng-if="vm.page > 0">-->
        <!--form class="form-inline">
        <div class="form-group">
            <select class="form-control"
                    ng-model="vm.categoryId"
                    ng-options="category.id as category.name for category in vm.categories" ng-change="vm.changeCategoryId()"></select>
        </div>
        <div class="form-group">
        <input class="form-control" ng-model="vm.userName" ng-model-options="{debounce: 1000}" ng-change="vm.filterByUserName()" placeholder="Логин"/> <!--todo magic number--
        </div>
        </form-->
    </div>
    <!--<div class="row" *ngFor="let item of items | paginate: { id: 'server', itemsPerPage: itemsPerPage, currentPage: page, totalItems: totalItems }; let i = index;"-->
    <div class="row" *ngFor="let item of items; let i = index;">
        <div class="" *ngIf="!item.pending || roles.isEditor">
            <div class="flex-vertical-center"><a [routerLink]="['/news', item.id]" class="col-xs-9 col-sm-9"><h4 [textContent]="item.title"></h4></a>
                <span class="col-xs-3 col-sm-3 pull-right" *ngIf="roles.isNewsmaker">
            <a [hidden]="!item.pending || !roles.isEditor" (click)="showActivateModal(i)"><span class="glyphicon glyphicon-ok"></span></a>
            <a *ngIf="roles.isEditor" ng-if="isUserAuthor(userId(), item.authorId)" [routerLink]="['/news', item.id, 'edit']"><span class="glyphicon glyphicon-pencil"></span></a>
            <a *ngIf="roles.isEditor" (click)="showDeleteModal(i)"><span class="glyphicon glyphicon-trash"></span></a>
                    <!-- || isUserAuthor(userId(), item.authorId)-->
            </span>
            </div>i
            <div class="">
                <img class="img-thumbnail news-mini center-block" alt="" [src]="item.photoPath"/>
            </div>
            <div class="">
                <i> <span [innerHTML]="item.brief"></span></i>
            </div>
            <div class="col-sx-12 col-sm-12">
                <ul class="list-inline small small-offset">
                    <li class="">Категория:</li>
                    <li class=""><a [routerLink]="['/news/list', page, item.categoryId ]" [textContent]="item.categoryName"></a></li>
                    <li class="">|</li>
                    <li class="">Время добавления:</li>
                    <li class="" [textContent]="item.additionTime"></li>
                    <li class="">|</li>
                    <li class="">Просмотры</li>
                    <li class="" [textContent]="item.reads"></li>
                    <li class="">|</li>
                    <li class="">Автор:</li>
                    <li class=""><a [routerLink]="['/user', item.userId ]" [textContent]="item.userName"></a></li>
                    <li class="">|</li>
                    <li class="">Комментарии:</li>
                    <li class="" [textContent]="item.commentsCount"></li>
                </ul>
            </div>
        </div>
    </div>
    <div class="pagination">
        <pagination  *ngIf="items" [totalItems]="totalItems" [itemsPerPage]="itemsPerPage" [(ngModel)]="page" [maxSize]="7" (pageChanged)="pageChanged($event)"
                   previousText="&lsaquo;" nextText="&rsaquo;" firstText="1" lastText="totalItems/itemsPerPage" ></pagination>
    </div>
</div>

<div class="modal fade" bsModal #activateModal="bs-modal" [config]="{backdrop: 'static'}"
     tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" aria-label="Close" (click)="hideModal()">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title">Активировать?</h4>
            </div>
            <div class="modal-body">
                <button class="btn btn-default" data-dismiss="modal" (click)="hideModal()" type="button">Отмена</button>
                <button class="btn btn-primary" type="button" (click)="activate()">Активировать</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" bsModal #deleteModal="bs-modal" [config]="{backdrop: 'static'}"
     tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" aria-label="Close" (click)="hideModal()">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title">Удалить?</h4>
            </div>
            <div class="modal-body">
                <button class="btn btn-default" data-dismiss="modal" (click)="hideModal()" type="button">Отмена</button>
                <button class="btn btn-primary" type="button" (click)="delete()">Удалить</button>
            </div>
        </div>
    </div>
</div>