@model PageableData<MaterialMiniDto>

@{
    ViewBag.Title = "Новости";
  //  Layout = "_Layout";
}

<div>
    @*<match-header></match-header>*@
    @foreach (var item in @Model.List)
    {
        if(!item.Pending || User.IsInRole(nameof(RolesEnum.NewsStart)) || User.IsInRole(nameof(RolesEnum.BlogStart)) @*todo || User?.GetUserId() == item.UserId *@)
         {
             <div class="padding10">
                 <div class="row flex border-left-maroon" [class.material-pending]="item.pending">
                     <div class="flex-vertical-center material-header col-xs-12">
                         <a href="@Url.Action("Detail", "Material", new {id = item.Id})">
                             <h3 class="beauty-font">@item.Title</h3>
                         </a>
                         <span class="pull-right">
                             @if (User.IsInRole(nameof(RolesEnum.NewsFull)) @*todo || User?.GetUserId() == item.UserId *@)
                             {
                                 <span>
                                     @if (item.Pending && User.IsInRole(nameof(RolesEnum.NewsFull)))
                                     {
                                         <a role="button" (click)="showActivateModal(i)"><span class="glyphicon glyphicon-ok"></span></a>
                                     }
                                     <a [routerLink]="['/', item.typeName, item.id, 'edit']"><span class="glyphicon glyphicon-pencil"></span></a>
                                     <a role="button" (click)="showDeleteModal(i)"><span class="glyphicon glyphicon-trash"></span></a>
                                 </span>
                             }

                         </span>
                     </div>
                     <div class="col-xs-6 col-sm-12 col-md-12 col-lg-6">
                         <img class="img-thumbnail news-mini center-block" alt="@item.Title" src="@item.Photo"/>
                     </div>
                     <div class="col-xs-6 col-sm-12 col-md-12 col-lg-6 flex-vertical-center">
                         <i class="">@item.Brief</i>
                     </div>
                     <div class="col-xs-12 col-sm-12 material-info-panel">
                         <ul class="list-inline small small-offset">
                             <li class="">Категория:</li>
                             <li class="">
                                 <a [routerLink]="['/', item.typeName]" [queryParams]="{page: page, categoryId: item.categoryId, userName: userName
                                        }" [textContent]="item.categoryName"></a>
                                 @item.CategoryName
                             </li>
                             <li class="">|</li>
                             <li class="">Время добавления:</li>
                             <li class="">@item.AdditionTime.ToString("G")</li>
                             <li class="">|</li>
                             <li class="">Просмотры:</li>
                             <li class="">@item.Reads</li>
                             <li class="">|</li>
                             <li class="">Автор:</li>
                             <li class=""><a href="@Url.Action("Detail", "User", new { id=item.UserId})">@item.UserName</a></li>
                             @if (item.CanCommentary)
                             {
                                 <li class="">| Комментарии: @item.CommentsCount</li>
                             }
                         </ul>
                     </div>
                 </div>
             </div>
         }
    }
    @*<div class="pagination">
            <pagination-controls (pageChange)="pageChanged($event)"
                                 directionLinks="true"
                                 autoHide="true"
                                 previousLabel="Назад"
                                 nextLabel="Вперед"
                                 screenReaderPaginationLabel="Постраничный вид"
                                 screenReaderPageLabel="Страница"
                                 screenReaderCurrentLabel="Вы на странице"></pagination-controls>
        </div>*@
</div>
