@model PageableData<UserMiniDto>

@{
    ViewBag.Title = "Пользователи";
    Layout = "_Layout";
}

<table class="table table-striped table-condensed">
    <thead>
    <tr>
        <th>Последний вход</th>
        <th>Логин</th>
        <th>Дата регистрации</th>
        <th>Группа</th>
    </tr>
    </thead>
    <tbody *ngFor="let user of items | paginate: { itemsPerPage: itemsPerPage,
                                                      currentPage: page,
                                                      totalItems: totalItems }; let i = index;">
    @foreach (var user in Model.List)
    {
        <tr>
            <td class="">@user.LastModified.ToString("G")</td>
            <td class="">
                <a asp-action="Detail" asp-controller="User" asp-route-id="@user.Id">
                    <div class="col-sm-3">
                        <img class="mini-avatar" src="@user.Photo" alt="@user.UserName"/>
                    </div>
                    <span class="col-sm-7">@user.UserName</span>
                </a>
                @*<span class="text-danger" tooltip="Почта не подтверждена" *ngIf="!user.emailConfirmed && (roles.isAdminAssist || roles.isSelf(user.id))"> *</span>*@
                @*<a class="col-sm-2" role="button" *ngIf="roles.isLogined && !roles.isSelf(user.id)" (click)="writePm(i)"><span class="glyphicon glyphicon-envelope"></span></a>*@
            </td>
            <td class="">@user.RegistrationDate.ToString("G")</td>
            <td class="">@user.RoleGroupName</td>
        </tr>
    }
    </tbody>
</table>
@{
    var prevDisabled = Model.PageNo == 1 ? "disabled" : "";
    var nextDisabled = Model.PageNo == Model.TotalPages ? "disabled" : "";
}

<a asp-action="Index"
   asp-controller="User"
   asp-route-page="@(Model.PageNo - 1)"
   class="btn btn-default @prevDisabled">
    Предыдущая
</a>
<a asp-action="Index"
   asp-controller="User"
   asp-route-page="@(Model.PageNo + 1)"
   class="btn btn-default @nextDisabled">
    Следующая
</a>