<div class="col-sm-12 top20">
    <div class="col-sm-12" *ngIf="!isAgreeWithRules">
        <h4>Друзья, если у вас уже был аккаунт на старом сайте, то не нужно регистрироваться заново. Мы можем и вернуть вам к нему доступ, и поменять почту, и поменять логин(по желанию). Если это так, то пишите в идеи, или на почту andrew_parys@tut.by.</h4>
        <div class="full-width">Перед регистрацией пожалуйста ознакомьтесь с <a [routerLink]="['/rules']" target="_blank"> правилами поведения на сайте</a> (ссылка откроется в новом окне).
        </div>
        <md-checkbox (change)="isAgreeWithRules = $event" color="warn" class="full-width">Согласен соблюдать правила</md-checkbox>
    </div>
    <div class="full-width" *ngIf="isAgreeWithRules">
        <form class="full-width" *ngIf="!result" [formGroup]="registerForm" (ngSubmit)="onSubmit()" role="form">
            <div class="form-group full-width">
                <md-form-field class="full-width">
                    <input mdInput formControlName="userName" placeholder="Логин"/>
                </md-form-field>
                <div class="alert alert-danger" *ngIf="registerForm.controls['userName'].touched && !registerForm.controls['userName'].valid">
                    <div *ngIf="registerForm.controls['userName'].hasError('required')">Необходимо заполнить поле.</div>
                    <div *ngIf="registerForm.controls['userName'].hasError('minlength')">Значение должно превышать 3 символа.</div><!--todo move to config-->
                    <div *ngIf="registerForm.controls['userName'].hasError('notUniqueUserName')">Пользователь с таким логином уже зарегистрирован.</div>
                </div>
            </div>
            <div class="form-group full-width">
                <md-form-field class="full-width">
                    <input mdInput formControlName="email" type="email" placeholder="Почта"/>
                </md-form-field>
                <div class="alert alert-danger" *ngIf="registerForm.controls['email'].touched && !registerForm.controls['email'].valid">
                    <div *ngIf="registerForm.controls['email'].hasError('required')">Необходимо заполнить поле.</div>
                    <div *ngIf="registerForm.controls['email'].hasError('minlength')">Значение должно превышать 6 символов.</div> <!--todo move to config-->
                    <div *ngIf="registerForm.controls['email'].hasError('incorrectMailFormat')">Введенное значение не является допустимым адресом.</div>
                    <div *ngIf="registerForm.controls['email'].hasError('notUniqueEmail')">Пользователь с таким адресом уже зарегистрирован.</div>
                </div>
            </div>
            <div class="form-group">
                <md-form-field class="full-width">
                    <input mdInput formControlName="password" type="password" placeholder="Пароль" />
                </md-form-field>
                <div class="alert alert-danger" *ngIf="registerForm.controls['password'].touched && !registerForm.controls['password'].valid">
                    <div *ngIf="registerForm.controls['password'].hasError('required')">Необходимо заполнить поле.</div>
                    <div *ngIf="registerForm.controls['password'].hasError('minlength')">Значение должно превышать 6 символов.</div> <!--todo move to config-->
                </div>
            </div>
            <div class="form-group">
                <md-form-field class="full-width">
                    <input mdInput formControlName="confirmPassword" type="password" placeholder="Ещё раз пароль" />
                </md-form-field>
                <div class="alert alert-danger" *ngIf="registerForm.controls['confirmPassword'].touched &&
                      (!registerForm.controls['confirmPassword'].valid || registerForm.hasError('mismatchedPasswords'))">
                    <div *ngIf="registerForm.controls['confirmPassword'].hasError('required')">Необходимо заполнить поле.</div>
                    <div *ngIf="registerForm.controls['confirmPassword'].hasError('minlength')">Значение должно превышать 6 символов.</div> <!--todo move to config-->
                    <div *ngIf="registerForm.hasError('mismatchedPasswords')">Введенные пароли должны совпадать.</div>
                </div>
            </div>
            <div class="form-group" *ngIf="isHuman">
                <div class="text-center">
                    <button md-raised-button color="warn" [disabled]="!registerForm.valid" type="submit">Зарегистрироваться</button>
                </div>
            </div>
            <div class="form-group" [hidden]="isHuman">
                <div class="text-center">
                    <recaptcha (isHuman)="isHuman = $event"></recaptcha>
                </div>
            </div>
        </form>
        <span *ngIf="result">Регистрация прошла успешно, пожалуйста, подтвердите регистрацию. Письмо отправлено на введенную вами почту.</span>
    </div>
</div>